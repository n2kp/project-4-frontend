<div class="main">

{{ profile.user.image_src }}
  <h1>Profile </h1>
  <div class="row">
    <div class="col s5">
      <img ng-src="{{ profile.user.image_src }}">
      <h6>{{ profile.user.username }}</h6>
      <h6>{{ profile.user.firstname }} {{ profile.user.lastname }}</h6>
      <h6>{{ profile.user.email }}</h6>
      <h6 ng-if="main.currentUser.is_dev" >Skills: {{ profile.user.tech_stack }}</h6>
      <div ng-if="main.currentUser.is_dev">
        <h6>Portfolio: {{ profile.user.portfolio_url }}</h6>
        <h6>LinkedIn: {{ profile.user.linkedin_url }}</h6>
        <h6>Github: {{ profile.user.github_url }}</h6>
      </div>

      <a ng-if="main.currentUser.id !== profile.user.id" ui-sref="conversations">Message {{profile.user.firstname}}</a>
      <a ng-if="main.currentUser.id === profile.user.id" ui-sref="profileEdit({ id: profile.user.id })">Update your profile</a>

      <div ng-if="main.currentUser.is_dev">
        <h2>Current Bid <em ng-if="profile.user.tenders.length > 1">'s</em> made -</h2>
        <div ng-repeat="tender in profile.user.tenders">
          <br>
          <p>Bid made: {{ tender.bid | currency : '£' : 0 }}</p>
          <p>Your pitch: {{ tender.pitch }}</p>
          <p>Current Status: {{ tender.status }}</p>
        </div>
      </div>

      <div ng-if="!main.currentUser.is_dev">
        <h1>Current Project <em ng-if="profile.user.projects.length > 1">'s</em> listed -</h1>
        <div ng-repeat="project in profile.user.projects">
          <br>
          <h3> {{ project.title }}</h3>
          <p>{{ project.description }}</p>
          <p>{{ project.project_deadline | date }}</p>
          <p>{{ project.bid_deadline | amDifference : null : 'days' }} days </p>
          <p>{{ project.tech_stack }}</p>
          <p>{{ project.budget | currency : '£' : 0}}</p>

          <h5>You currently have {{ project.tenders.length }} bids on this project, <a ui-sref="projectsShow({ id: project.id })">click here</a> to view your project </h5>
        </div>
      </div>

    </div>

    <div class="col s5">
      <div ng-repeat="review in profile.reviews">
        <p>{{ review.body }}</p>
        <p>{{ review.rating }}</p>
      </div>




      <form ng-submit="profile.addReview()">
        <textarea  placeholder="Write a user review" ng-model="profile.newReview.body"></textarea>
        <input type="number" name="rating" ng-model="profile.newReview.rating">
        <button class="button primary marginTop">Post Review</button>
      </form>

    </div>
  </div>

  <div>
      <h4>Default</h4>
      <span uib-rating ng-model="rating" max="max" read-only="isReadonly" on-hover="hoveringOver(value)" on-leave="overStar = null" titles="['one','two','three']" aria-labelledby="default-rating"></span>
      <span class="label" ng-class="{'label-warning': percent<30, 'label-info': percent>=30 && percent<70, 'label-success': percent>=70}" ng-show="overStar && !isReadonly">{{percent}}%</span>

      <pre style="margin:15px 0;">Rate: <b>{{rate}}</b> - Readonly is: <i>{{isReadonly}}</i> - Hovering over: <b>{{overStar || "none"}}</b></pre>

      <button type="button" class="btn btn-sm btn-danger" ng-click="rate = 0" ng-disabled="isReadonly">Clear</button>
      <button type="button" class="btn btn-sm btn-default" ng-click="isReadonly = ! isReadonly">Toggle Readonly</button>
      <hr />


</div>
</div>
