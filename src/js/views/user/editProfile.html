<!DOCTYPE html >

<div class="main">
  <div class="container">
    <div class="row">
      <div class="col s6 offset-s3 z-depth-1">

        <h1>Update your Profile</h1>

        <form ng-submit="profileEdit.update()" novalidate name="profileEdit.editProfileForm">

          <div ng-if="profileEdit.user.is_dev === null">

            <h2> How would you like to use Justo? </h2>

            <div class="row justify-content-center">
              <input class="hidden" type="radio" id="is_dev" name="is_dev" value="is_dev" ng-model="profileEdit.user.is_dev" data-ng-value="true">
              <label for="is_dev" class="col-sm-5 devOrNot text-center registerSelect cursor">
                <div class="devSelectImageOne"></div>
                  Developer looking for work
              </label>

              <input class="hidden" type="radio" id="is_customer" name="is_customer" value="is_dev" ng-model="profileEdit.user.is_dev" data-ng-value="false">
              <label for="is_customer" class="col-sm-5 devOrNot text-center registerSelect cursor">
                <div class="devSelectImageTwo"></div>
                  Business looking for developers
              </label>
            </div>

          </div>

          <!--USERNAME INPUT  -->
          <div class="form-group">
            <label for="username">Username</label>
            <input class="form-control" type="text" name="username" id="username" ng-model="profileEdit.user.username" unique required>
          </div>
          <!-- USERNAME VALIDATION/MESSAGES -->
          <div ng-messages="profileEdit.editProfileForm.username.$error" ng-show="profileEdit.editProfileForm.$submitted || profileEdit.editProfileForm.username.$touched">
            <div ng-message="required" class="errorMessage">A username is required</div>
            <div ng-message="unique" class="errorMessage">Please choose a different username, this one was already been taken</div>
          </div>



          <!--FIRST NAME INPUT  -->
          <div class="form-group">
            <label for="firstname">First Name</label>
            <input class="form-control" type="text" ng-model="profileEdit.user.firstname" name="firstname" id="firstname" required>
          </div>
          <!-- FIRST NAME VALIDATION/MESSAGES -->
          <div ng-messages="profileEdit.editProfileForm.firstname.$error" ng-show="profileEdit.editProfileForm.$submitted || profileEdit.editProfileForm.firstname.$touched">
            <div ng-message="required" class="errorMessage">You forgot to provide us with you first name</div>
          </div>


          <!--LAST NAME INPUT  -->
          <div class="form-group">
            <label for="lastname">Last Name</label>
            <input class="form-control" type="text" ng-model="profileEdit.user.lastname" name="lastname" id="lastname" required>
          </div>
          <!-- LAST NAME VALIDATION/MESSAGES -->
          <div ng-messages="profileEdit.editProfileForm.lastname.$error" ng-show="profileEdit.editProfileForm.$submitted || profileEdit.editProfileForm.lastname.$touched">
            <div ng-message="required" class="errorMessage">You forgot to provide us with you last name</div>
          </div>


          <!--EMAIL INPUT  -->
          <div class="form-group">
            <label for="email">Email</label>
            <input class="form-control" type="text" ng-model="profileEdit.user.email" name="email" id="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required>
          </div>
          <!-- EMAIL VALIDATION/MESSAGES -->
          <div ng-messages="profileEdit.editProfileForm.email.$error" ng-show="profileEdit.editProfileForm.$submitted || profileEdit.editProfileForm.email.$touched">
            <div ng-message="required" class="errorMessage">An email address is required</div>
            <div ng-message="pattern" class="errorMessage" >This Email is not valid</div>
          </div>

          <div ng-if="main.currentUser.is_dev">

            <!--TECH STACK INPUT  -->
            <div class="form-group">
              <label for="tech_stack">Tech Stack</label>
              <input class="form-control" type="text" ng-model="profileEdit.user.tech_stack" name="tech_stack" id="tech_stack">
            </div>

            <!--PORTFOLIO WEBSITE INPUT  -->
            <div class="form-group">
              <label for="portfolio_url">Portfolio Site</label>
              <input class="form-control" type="text" ng-model="profileEdit.user.portfolio_url" name="portfolio_url" id="portfolio_url" pattern="(@'^(http|https)://.*$')" >
            </div>
            <!-- PORTFOLIO WEBSITE VALIDATION/MESSAGES -->
            <div ng-messages="profileEdit.editProfileForm.portfolio_url.$error" ng-show="profileEdit.editProfileForm.$submitted || profileEdit.editProfileForm.portfolio_url.$touched">
              <div ng-message="pattern" class="errorMessage">The URL must start with 'http://' or 'https://'</div>
            </div>

            <!--LINKEDIN INPUT  -->
            <div class="form-group">
              <label for="facebook_url">Facebook URL</label>
              <input class="form-control" type="text" ng-model="profileEdit.user.facebook_url" name="facebook_url" id="facebook_url" pattern="(@'^(http|https)://.*$')">
            </div>
            <!-- LINKED IN VALIDATION/MESSAGES -->
            <div ng-messages="profileEdit.editProfileForm.facebook_url.$error" ng-show="profileEdit.editProfileForm.$submitted || profileEdit.editProfileForm.facebook_url.$touched">
              <div ng-message="pattern" class="errorMessage">The URL must start with 'http://' or 'https://'</div>
            </div>

            <!--GITHUB INPUT  -->
            <div class="form-group">
              <label for="github_url">Github URL</label>
              <input class="form-control" type="text" ng-model="profileEdit.user.github_url" name="github_url" id="github_url" pattern="(@'^(http|https)://.*$')">
            </div>
            <!-- GITHUB VALIDATION/MESSAGES -->
            <div ng-messages="profileEdit.editProfileForm.github_url.$error" ng-show="profileEdit.editProfileForm.$submitted || profileEdit.editProfileForm.github_url.$touched">
              <div ng-message="pattern" class="errorMessage">The URL must start with 'http://' or 'https://'</div>
            </div>

          </div>

          <!--IMAGE INPUT  -->
          <div class="form-group">
            <label for="base64">Profile Picture</label>
            <input class="form-control" type="file" base64 ng-model="profileEdit.user.base64" name="base64" id="base64">
          </div>

          <button class="button primary">Update your Profile</button>
          <button ng-click="profileEdit.deleteUser()" class=" button danger">Delete Account</button>

        </form>

      </div>
    </div>
  </div>
</div>
